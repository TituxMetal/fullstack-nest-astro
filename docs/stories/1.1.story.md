---
epic: '1'
story_id: '1.1'
title: 'Complete Monorepo Restructuring'
status: 'Draft'
as_a: 'developer working in the monorepo'
i_want:
  'the complete monorepo restructured to use `apps` and `packages` directories with all
  configurations updated'
so_that:
  'I can work with a fully functional, modern monorepo structure that is commitable and testable as
  a complete unit'
acceptance_criteria:
  # Directory Structure
  - 'AC1.1.1: Root directory contains `apps/` directory'
  - 'AC1.1.2: Root directory contains `packages/` directory'
  - 'AC1.1.3: `backend/` directory is moved to `apps/backend/` with all files intact'
  - 'AC1.1.4: `frontend/` directory is moved to `apps/frontend/` with all files intact'
  - 'AC1.1.5: Git history is preserved for moved files (using `git mv` commands)'
  # Configuration Updates
  - 'AC1.1.6: `turbo.json` pipeline configurations updated to use `apps/backend` and `apps/frontend`
    paths'
  - 'AC1.1.7: Root `package.json` workspace configurations updated to include `apps/*` pattern'
  - 'AC1.1.8: `docker/Dockerfile.backend` updated to use `apps/backend` as build context'
  - 'AC1.1.9: `docker/Dockerfile.frontend` updated to use `apps/frontend` as build context'
  - 'AC1.1.10: `docker/compose.yaml` updated to reference new application paths'
  - 'AC1.1.11: `docker/start.sh` script updated for new directory structure'
  # System Functionality
  - 'AC1.1.12: All Turborepo commands (`yarn build`, `yarn test`, `yarn lint`, `yarn dev`) work from
    root directory'
  - 'AC1.1.13: Yarn workspace commands correctly identify both applications'
  - 'AC1.1.14: Both applications can be built independently from new locations'
  - 'AC1.1.15: All import paths within applications continue to work'
  - 'AC1.1.16: Environment variables and configuration loading still functions'
dev_notes:
  - 'This story consolidates the complete monorepo restructuring into one atomic, commitable unit.'
  - 'All changes must be completed together to ensure the system remains functional.'
  - '**Source Tree Reference**: The target structure is defined in
    `docs/architecture/source-tree.md`.'
  - '**Testing**: All existing tests must continue to pass after the complete restructuring.'
  - '**Docker**: All containerization must work with new structure.'
  - '**Git**: Use `git mv` commands to preserve file history during the move operations.'
tasks:
  # Phase 1: Directory Structure Setup
  - '1. Create `apps/` directory in project root (AC: 1.1.1)'
  - '2. Create `packages/` directory in project root (AC: 1.1.2)'
  # Phase 2: Move Applications
  - '3. Use `git mv backend apps/backend` to move backend with history preservation (AC: 1.1.3,
    1.1.5)'
  - '4. Use `git mv frontend apps/frontend` to move frontend with history preservation (AC: 1.1.4,
    1.1.5)'
  # Phase 3: Update Root Configuration
  - '5. Update `turbo.json` to reference `apps/backend` and `apps/frontend` (AC: 1.1.6)'
  - '6. Update root `package.json` workspaces to include `apps/*` pattern (AC: 1.1.7)'
  # Phase 4: Update Docker Configuration
  - '7. Update `docker/Dockerfile.backend` to use `apps/backend` context (AC: 1.1.8)'
  - '8. Update `docker/Dockerfile.frontend` to use `apps/frontend` context (AC: 1.1.9)'
  - '9. Update `docker/compose.yaml` for new application paths (AC: 1.1.10)'
  - '10. Update `docker/start.sh` script for new structure (AC: 1.1.11)'
  # Phase 5: Comprehensive Testing
  - '11. Run `yarn build` to verify both applications build successfully (AC: 1.1.12, 1.1.14)'
  - '12. Run `yarn test` to verify all tests pass (AC: 1.1.12, 1.1.15, 1.1.16)'
  - '13. Run `yarn lint` to verify linting works correctly (AC: 1.1.12)'
  - '14. Run `yarn dev` to verify development mode works (AC: 1.1.12)'
  - '15. Test Docker builds and compose functionality (AC: 1.1.8-1.1.11)'
  - '16. Verify workspace commands work correctly (AC: 1.1.13)'
---
